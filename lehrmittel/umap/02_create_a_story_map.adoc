= Create a story map with pictures with uMap
OpenSchoolMaps.ch -- Free learning materials for free geodata and maps
:imagesdir: ../../bilder/
include::../../snippets/suppress_title_page.adoc[]

== Overview

.Goal
The goal of this guide is to create a story map with uMap as part of the OpenSchoolMaps project. In geography, a story map provides an attractive and informative combination of publicly available maps, accompanying text, images and multimedia content.
This is the map we will create:

.Example of a story map created with uMap. Map data (C) OpenStreetMap Contributors
image::umap/story-map_erstellen/endprodukt.png[]

You can see the full example map at  https://umap.osm.ch/de/map/karte-von-rapperswil-sg_1377#15/47.2188/8.8119. You may have to zoom in on the blue pins.

.Audience
Anyone who are interested in "Mapping".

.Scheduling
Depending on the size of your story map you should plan about 45 minutes for this guide.

//(Siehe auch Abschnitt https://dinacon.ch/wp-content/uploads/sites/4/2017/10/dinacon_17.pdf#Outline0.3[Erstellen einer Fotostory mit uMap] im Foliensatz des DINAcon-Vortrags https://dinacon.ch/sessions/2017/osm/[Nutzung von OpenStreetMap für Standortkarten und Online-Stories].)

<<<

== Preparation
First you need a web browser in which you can open the page. 
Consider in advance what the end product should look like and note which points you want to have in it. This step is optional, of course, but very useful to make faster progress later.

== Creating the Story Map

  * Visit the page umap.osm.ch.
  * Create a new map +
+
.The umap.osm.ch homepage
image::umap/story-map_erstellen/uMap_homepage.png[]
  * You can select the draw a marker icon image:umap/stecknadel_icon.PNG["Draw a marker icon", 25, 25] you would like to have on the map. You can also select the draw a polyline icon image:umap/weg_icon.PNG["Draw a polyline icon", 25, 25] or draw a polygon icon image:umap/flaeche_icon.PNG["Draw a polygon icon", 25, 25].
  * Now to the actual "story". The most important step is to activate the slide show under "Edit map settings image:umap/story-map_erstellen/zahnrad_icon.png["Edit map settings icon", 25, 25] Slideshow -> Toggle the Activate slideshow mode". After saving the settings, you probably need to refresh with F5.

== Add Description

Now that you have added several points to the map, we can add a description for each point. These descriptions are displayed during the slide show.

To add a description, click (in edit mode) on the item you want to edit and write your text in the "Description" text box.
In addition, write a suitable name for the point in the "Name" text box, as we will need it later.

[NOTE]
====
To create a nice description we have some tips for you:

* To make an italic font, you need `+*one asterisk*+`..
* To make a bold font, you need `+**two asterisk**+`.
* To make headings you need `# titles`. The more `#` the smaller the heading gets.
	
Further display modes can be found by clicking on the question mark above the "Description" text box.
====

To add an image to the description, you first need the link to the image.
If the link is `https://www.example.com/picture.png`, then you must enter the following: `{{https://www.example.com/picture.png}}`

Your description should now look something like this:

.Element properties with filled description
image::umap/story-map_erstellen/beschreibung.PNG["Text in the description", 293, 418]

Now add a description to each item. If you are satisfied with the result, you can click on the "Save" button at the top right and exit the editing mode.

By clicking on the play button you can start the slide show and view its story map.
Clicking the Stop button allows you to stop the slideshow.

<<<

== Change display (optional)

* You can change the appearance of pins under "Edit map settings image:umap/story-map_erstellen/zahnrad_icon.png["Edit map settings icon", 25, 25] -> Default shape properties -> Icon symbol".
* You can also display the pop-up information in the sidebar. To do this, go to "Edit map settings image:umap/story-map_erstellen/zahnrad_icon.png["Edit map settings icon", 25, 25] -> Default interaction options -> Popup style" and select "Side panel". After saving and refreshing the site, the pop-up information should appear in the side panel.

== Controlling the order of the slideshow (Advanced)

To control the order of the locations in the slideshow, we need to add a sort key. Open the layer management image:umap/story-map_erstellen/ebene_icon.png["Ebenen-Icon", 25 ,25] on left side of the screen and click on the tiny icon "Edit properties in a table"  image:umap/story-map_erstellen/merkmal_bearbeiten.png["Property icon", 25, 25] Click on the button image:umap/story-map_erstellen/merkmal_hinzufügen.png["Add a new property icon", 100, 20] and enter a name (for example "index"). Now you can enter a value for each location in the "index" column with which the website can sort the order. Since the table in uMap sorts lexographically, for example, the number 20 will appear before the number 3. To prevent this, you should use values such as 1000 and above to sort. If you have added a sort key for each location, you must then select the newly created sort key column under Edit map settings image:umap/story-map_erstellen/zahnrad_icon.png["Edit map settings icon", 25, 25] -> Default properties -> Sort key. (No selection is made here - you must enter the name of the field yourself!)

== Add Features (Advanced)

So far we have always written the whole description ourselves. In order to simplify this process, we may store this information with characteristics.

As you learned in the previous step "Controlling the order of the slideshow", you must also add new features to the table here.
Two more columns that you will certainly need are "bildurl" and "text". We have added another column "opening hours" in the example. However, this is optional and of course you can add other columns if you wish.

Fill the newly created columns with values and close the sidebar again. The result should look something like this:

.The newly created columns "bildurl" (far left) and "text" (far right).
image::umap/story-map_erstellen/merkmale_gefuellt.PNG["Filled characteristics table"]

To use these values from the table, you must insert this text under "Edit map settings image:umap/story-map_erstellen/zahnrad_icon.png["Edit map settings icon", 25, 25] -> Default interaction options -> Popup content template":

....
{text}
{{{bildurl}}}
{opening hours}
....

NOTE: If you do not have any column "opening times" or have generally used other column names, you must change or remove these accordingly.

From now on you only have to add the information in the table for the new points on the map and afterwards the display text for the popup is compiled automatically.

IMPORTANT: When creating a uMap, the data in OpenStreetMap is not changed, only "drawn on".

uMap and the OpenSchoolMaps project are based on OpenStreetMap (https://osm.org).

include::../../snippets/kontaktinformationen.adoc[]

include::../../snippets/quellenangabe.adoc[]
