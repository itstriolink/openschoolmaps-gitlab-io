= Introduction to QGIS 3: Data collection and Management (Chapter 3)
OpenSchoolMaps.ch -- Freie Lernmaterialien zu freien Geodaten und Karten
:xrefstyle: short
:imagesdir: ../../../bilder/
include::../../../snippets/lang/de.adoc[]
include::../../../snippets/suppress_title_page.adoc[]

*A worksheet*
ifdef::show_solutions[- *LÃ–SUNGEN*]

You have probably already 
entered datain a table (e.g. an Excel
spreadsheet).What kind of data did you
enter? Where did the values 
you entered come from? Where could
values come from in general 
terms that are stored in a table?
As an introduction to this 
chapter, think about these 
questions for two to three 
minutes. Make a note of them
on your worksheet. Go on in this
chapter only then.

== Learning objectives of the theory

This chapter has the following learning objectives:

* explain the structure of a
table in your own words
* list at least 4 types of
data acquisition without tools
* show in your own words
why it is worth investing 
money and time in data 
acquisition and management.

== Theory

In the chapter Geodata and 
spatial reference we have 
seen that there are generally
two ways to store geodata: 
In the form of vector data 
and raster data. Since you will
probably save the data you 
collect as vector data in future
GIS projects, this chapter 
will also deal with the 
collection of vector data.

=== Table

First, however, we will deal with 
the general recording of values in
*tables*. A table consists of *rows*
and *columns*. The row is _horizontal_
and the different datasets are stored
in it. The column is _vertical_ and 
a certain property of a data set is
stored in it.

Tables are often used to store values
from measurements. For example, the 
number of students in a class can be
stored in a table. The number of 
students of a class can be counted. 
In addition, the class teacher could
also be entered in the table. 
The corresponding table would then 
look as follows.

[%header,cols=3*]
|===
|Class
|Number of students
|Teacher

|1c
|22
|Gaby Meyer

|2b
|24
|Franz Peter

|...
|...
|...
|===

The names of the columns 
(e.g. class, number of students...) 
are called *attributes*.

For geodata, the geometry must also
be saved in addition to the 
attributes. In the previous exercises
you already got to know the shapefile
as a storage type for geodata. With
the Shapefile, the geometry and the
attribute data are saved in 
different files.

Open the directory in which the data
for the exercise is stored and take a
closer look at the data. In addition
to the main file with the extension 
_.shp_ there are other files with the
same name but a different extension. 
For example, the file with the 
extension _.dbf_ contains the factual
data and the file with the extension 
_.prj_ contains the coordinate system.
All these files together form 
the shape file.

The geodata can also be stored in 
special databases, so-called 
*geodatabases*. These databases 
function similarly to normal databases,
but additionally offer the possibility
to manage geometry as well as factual 
information. Normal databases cannot 
do this. Examples for geo databases 
are e.g. _Oracle Spatial_ and _PostGIS_.

=== Data acquisition

Now you have learned in which form
geodata can be saved. But how do 
you get from the objects in the 
real world to the information you 
want to store?

image:einfuehrung_in_qgis/ausrufezeichen.png[Exclamation mark, 15, 15]
_Task 1_ +
_Think for two to three minutes
about what sources the data might
come from and what collection 
methods you know. Continue 
in the text only then._

ifdef::show_solutions[]
====
.Solution
Compare your solution with the data 
collection possibilities from theory.
====
endif::show_solutions[]

There are many methods to capture 
geodata. We would like to 
briefly discuss some of them. 

. In part 1 of this guidance program,
the example with the mobile phone 
with integrated GPS was used. Besides
measuring with tachymeters, GPS is 
a popular method in surveying to 
record the geometry of objects in the
field. Often the result of 
measurements has to be read into the 
GIS project as a text file containing
coordinate and attribute values.
. Aerial images are often used
as background images.
. Often plans are still available in
analogue form, i.e. as paper maps. 
In order to convert these plans into
digital form, they must be scanned. 
After scanning, the data is digital, 
but has no spatial reference. In order
to obtain a spatial reference, they must
also be georeferenced (see chapter 
Geodata and spatial reference).
. Aerial photographs and digitized and
georeferenced plans often provide a good
basis for converting objects into vector
format. This process is also 
called vectorizing.
. Some data have already been collected
in another GIS project. Some of these 
data can be transferred without adjustments.
Often the data format or the coordinate 
system have to be adapted or additional 
attributes have to be entered.
. Statistical offices publish a large 
number of statistical surveys. These
statistical data can be imported and
linked to the corresponding geometric
objects, such as cantonal boundaries,
in order to obtain a spatial reference.

Data acquisition and management usually
takes a lot of time. But the effort is
worth it, because the data can be 
regarded as the core of the GIS. If the
quality of the data is poor or the data
is incomplete or outdated, the results
of the evaluations or the maps created
from the data are correspondingly poor.

Compared to the other GIS components 
software and hardware, the data have
a very long service life. While 
better and faster computers are coming
onto the market and the software 
products are usually outdated after
a few years, the data can be 
used for decades.

Since the collection is very complex,
one is naturally also interested in 
being able to use the data as long as
possible. In order to guarantee this,
regular updating is just as important
as good and clean data collection. The
principle "as accurate as possible" 
does not apply to the collection of 
data, but "as accurate as necessary".

== QGIS Exercise

In the theory part you learned how
to get the geodata you need for your
GIS. In this exercise, you will 
integrate data from a text file into
your GIS so that it can be spatially 
referenced and geographically 
represented. You will also update data
in an existing dataset.

=== Learning objectives

When you've solved the exercise,
you've learned the following:

* spatially visualize a text
file with coordinates in a GIS
* label a layer with an
attribute value
* create new objects 
(geometry and attributes)
* change the display of the data
via the layer properties

=== Object from text file

The location of the cantonal capitals
is stored in the text file Hauptorte.txt.
Open this file in a text editor and 
take a closer look at the content.

image:einfuehrung_in_qgis/ausrufezeichen.png[Exclamation mark, 15, 15]
_Task 2_ +
_In what form is the location of
themain locations stored and how
is the information separated 
from each other? Write your 
findings on your worksheet._

ifdef::show_solutions[]
====
_Solution_

.Attributes of the cantons in text form
image::einfuehrung_in_qgis/abspeichern.png["Saving", 502, 192]

The position of the main locations is 
indicated by the X-coordinate (X-coordinate)
and the Y-coordinate (Y-coordinate). +

The attribute names are stored in the first
line of the text file. In our case, these
values are separated by commas. +

From the 2nd line onwards, the captured
objects follow. The attributes of the
individual objects are also separated by
commas. A new object always starts on a 
new line. For text values, quotation marks
must appear at the beginning and 
end of the value. +

The first line defines which separators are
used in the document. The characters 
selected there must also be used as 
separators in the rest of the document.
====
endif::show_solutions[]

The _Add Delimited Text Layer_ tool
for reading coordinates from a text
file can be found in the 
_Manage Layers Toolbar_ toolbar. If 
you don't know how to show toolbars
anymore, have a look at chapter 1 again.

Open the new tool and first enter the 
type of separator that separates the 
information in the text file 
(see Result of the last task).

Then click on the ... button and select
the text file _Hautporte.txt_. The tool
now automatically divides the text file
into different fields, whereby the 
selected separator determines where
the new field begins.

Below the geometry a suggestion appears 
automatically, which field should be
used as X-field and which as Y-field.
Compare the suggestion with your 
considerations. If you don't agree, 
change the entry. Then click on the OK
button to display the main locations
in the project.

In order to be able to perform spatial
analyses with the new Layer Main Locations
later, the same coordinate reference 
system as the other layers must be assigned
to the Layer. Open the _Layer Properties_ 
of the main locations and search under 
_Source_: the correct _CRS_/_KBS_. 
Select the coordinate system CH1903 
/LV03 with the EPSG-No. 21781.

If you now open the attributes table, 
you will see the information of the text
file displayed in a table. Additionally a
position in the map was calculated from 
the selected numbers for the X- and 
Y-coordinates and a point was placed there.

=== Labeling of a layer

Now the main locations are to be labelled.
Open the _Layer Properties_ window and 
select the _Labels_ option. For 
_Show labels_ select the _Single Labels_
field and as _Description_ field select
the field with the name _Main_. Then adjust
the font size, placement, clipping, etc.
until the label fits "into the image". 
In addition, select more suitable point
symbols for the main locations.

==== Change display colors

How satisfied are you with the colours 
of the lakes and cantons? Don't you think
that the light yellow colour would be 
better for the cantons and the blue colour
for the lakes? To change the display color,
right-click on the layer -> _Properties..._
or double-click on the layer to open the 
window called _Layer Properties_.

First of all, the representation of the 
cantons should be changed. Therefore open
the _Layer Properties_ window for
the canton boundaries.

.Display options of the layer Canton boundaries
image::einfuehrung_in_qgis/qgis_layer_properties_kantonsgrenzen.PNG["Layer Properties Canton Borders", 537, 359]

Check whether the Display option is selected in 
the selection window on the left. This will take
you to a mask where you can change the fill color,
type and border options in just a few steps. 
Try these options and choose a light yellow fill
color and an orange border for the canton areas. 
By clicking on the _Apply_ button you can view 
your settings in the map window. If you are satisfied,
you can close the window by clicking the OK button.

The lakes are to be given a two-coloured filling.
Open the window with the name 
_Layer Properties_ for the lakes layer.

.Display options of the lakes layer
image::einfuehrung_in_qgis/qgis_layer_properties_seen.PNG["Layer Properties Lakes", 537, 359]

Create a second symbol layer by clicking 
on the + button. Select the fill color 
light blue and the fill style _Solid_ for
the lower layer and a darker blue as fill 
color for the upper layer than for the first
layer and the option _Dense 4_ as fill style.
The border color should be the same as the 
fill color and the border width should be _0.4_.
When you are satisfied with the fill, close 
both windows by clicking OK. Don't you think
that the map window looks much better now?

=== Locator Bar

A new tool introduced in QGIS 3 
is the _Locator Bar_.

In QGIS, the _Locator Bar_ can be 
opened with the keyboard 
shortcut *Ctrl + K*.

With the _Locator Bar_ you can search for
actions, "computers" (calculation operations),
processing algorithms and much more from QGIS.

Try the tool yourself by selecting the lakes
layer and searching for a lake in the 
_Locator Bar_. Use the prefix `f` 
for the search. 

Example: `f Greifensee`

You can find the prefixes by opening 
the locator with *Ctrl + K*, or 
under
_Settings_ ->
_Options..._ -> 
_Locator_

=== Entering Objects

Es sollen nun zusÃ¤tzlich
zu den bestehenden Seen
zwei weitere Seen erfasst werden:
der _Lungernsee_ und der _WÃ¤gitalersee_.

Um den Lungernsee zu erfassen,
zoome in die NÃ¤he von _Sarnen_.
Der See zwischen _Giswil_,
_Brienz_ und _Meiringen_ ist der _Lungernsee_.
Um Ã¼berhaupt Daten erfassen zu kÃ¶nnen,
muss der Layer mit den Seen markiert werden
und aus dem Werkzeugkasten _Digitizing Toolbar_
der Button _Toggle Editing_
ausgewÃ¤hlt werden.
Das Gleiche geschieht mit Rechtsmausklick
auf den Layer und dann
die Option _Toggle Editing_ wÃ¤hlen.
Probiere beide Methoden mal aus
und entscheide dich fÃ¼r eine,
welche du in Zukunft verwenden mÃ¶chtest.

Die Buttons,
welche fÃ¼r die Digitalisierung
gebraucht werden kÃ¶nnen,
werden nun aktiviert.
WÃ¤hle den Button _Add Polygon Feature_
und setze Punkte entlang der hellblauen Linie
des Uferbereiches auf der Karte ab.
Um die FlÃ¤che zu schliessen,
drÃ¼cke die rechte Maustaste.
Es erscheint automatisch ein Fenster,
in welchem die Attribute
eingegeben werden kÃ¶nnen.
Gib folgende Werte ein:

*Name:* Lungernsee;
*Type:* Speichersee;

*FlÃ¤che:* 2.01 km^2^;
*HÃ¶he:* 688.0 m.Ã¼.M;
*Tiefe:* 68 m;
*Volumen:* 0.065 km^3^

Der zweite zu erfassende See
hat wie bereits erwÃ¤hnt
den Namen _WÃ¤gitalersee_
und liegt zwischen dem _Sihlsee_,
dem _ZÃ¼richsee_
und der Ortschaft _Glarus_.
Erfasse auch die Geometrie
und die Attribute dieses Sees.
Hier noch einige Infos:

*Name:* WÃ¤gitalersee;
*Type:* Speichersee;

*FlÃ¤che:* 4.18 km^2^;
*HÃ¶he:* 900.0 m.Ã¼.M;
*Tiefe:* 65 m;
*Volumen:* 0.150 km^3^

Um die Ã„nderungen zu speichern,
muss der Bearbeitungsstatus
wieder umgestellt werden.
Solange du dies nicht tust,
sind die Daten,
die du erfasst hast,
nicht abgespeichert.

Herzliche Gratulation,
du hast deine ersten Objekte
mit QGIS selber erfasst!

== Kapiteltest 3

Willkommen beim Kapiteltest 3.
Inzwischen bist du ja schon
ein alter Kapiteltest-Hase
und weisst genau,
was zu erledigen ist.
Deshalb hier
ohne grosse Worte
die Fragen:

=== Frage 1

Vektordaten kÃ¶nnen in
unterschiedlicher Form
abgespeichert werden.

_Welche zwei Arten
kennst du?_

Schreibe bei jeder Form
noch einen zusÃ¤tzlichen Satz,
in welchem du je
eine Besonderheit nennst.

ifdef::show_solutions[]
====
.LÃ¶sung
. Shapefile +
Die einfachste und schnellste
Form der Speicherung von
Vektordaten sind Shapefiles,
welche ihre Daten auf verschiedene
Dateien verteilen.
. Geodatenbanken +
Eine weitere Form der
Speicherung von Vektordaten
sind spezielle Datenbanken,
sogenannte Geodatenbanken.
Sie unterscheiden sich von
normalen Datenbanken dadurch,
dass sich mit ihnen zusÃ¤tzlich
noch die Geometrie verwalten
lÃ¤sst und nicht nur die Daten.
====
endif::show_solutions[]


=== Frage 2

Nicht nur in einem GIS
werden Informationen oft
in Form einer Tabelle
abgespeichert.

_Wie wÃ¼rdest du jemandem,
der noch nie
eine Tabelle gesehen hat,
den Aufbau
einer solchen beschreiben?_

Zur Beantwortung dieser Frage
darfst du auch eine Skizze
zu Hilfe nehmen.
Die wichtigen Begriffe
mÃ¼ssen jedoch in deiner Antwort
schriftlich stehen.

ifdef::show_solutions[]
====
_LÃ¶sung_

|===
|ID	|Vorname|Nachname|	Email
|1|Elena|Meller|Elena.me@gmail
|2|Nina|Schurter|Nina.Schur@gmx
|3|Ben|Schulte|Ben.Schul@gmx
|4|Miriam|Orler|Miriam.orl@hotmail
|5|Lukas|Gerber	|Lukas.gerb@gmail
|===

Die oben abgebildeten Daten haben die
Form einer Tabelle und sie sollen hierbei
als Beispiel dienen, um eine Tabelle
zu veranschaulichen. +

Tabellen dienen dazu, Informationen
geordnet abzulegen. Dabei bestehen
sie aus Zeilen (horizontal) und
Spalten (vertikal). Eine Zeile
beinhaltet einen sogenannten
Datensatz, auch Tupel genannt.
Ein Datensatz beinhaltet
verschiedene Daten, welche
zusammengehÃ¶ren und erst zusammen
aussagekrÃ¤ftig sind. Oben im Beispiel
wÃ¤re Elena Meller mit der Email
Elena.me@gmail und der ID 1 eine
Datensatz. Daneben gibt es noch
Spalten, welche Attribute enthalten,
welche wiederum eine Teilmenge eines
Datensatzes darstellen.
====
endif::show_solutions[]

=== Frage 3

Eine Art,
um Informationen zu Objekten
abzuspeichern ist,
diese in ein Textfile
zu schreiben.

. Was muss in einem Textfile
minimal gespeichert werden,
damit die Information
aus dem File im Kartenfenster
angezeigt werden kann
. Was muss beim Erfassen der Werte
im Textfile beachtet werden.
Wieso muss dies beachtet werden?

Beantworte die Fragen
in eigenen Worten
und begrÃ¼nde deine Antworten.
Denke bei der Beantwortung
der Fragen auch
an die Ãœbung zurÃ¼ck.

ifdef::show_solutions[]
====
.LÃ¶sung
. Es mÃ¼ssen Koordinaten- und
Attributwerte vorhanden sein +
. Es muss darauf geachtet
werden, dass die erste Zeile
des Textfiles die Attributnamen
getrennt durch ein Komma enthÃ¤lt.
Danach, in den darauffolgenden
Zeilen, folgen die Objekte,
bei welchen die Attribute auch
durch Kommas getrennt werden. +
====
endif::show_solutions[]

=== Frage 4

Du erhÃ¤ltst von deinem Klassenlehrer
den Auftrag,
fÃ¼r die nÃ¤chste Schulreise
ein GIS zu erstellen,
in welchem die
verschiedenen Zwischenstationen
des Ausfluges
und die Wanderroute
rÃ¤umlich dargestellt sind.

_Welche MÃ¶glichkeiten hast du,
um an die verschiedenen Daten zu kommen?_

WÃ¤hle zwei Themen aus,
die du im Schulreise-GIS
darstellen mÃ¶chtest.
Beantworte die Frage
fÃ¼r beide Themen.
Es mÃ¼ssen jedoch
zwei unterschiedliche Erfassungsarten
beschrieben werden.
Es gibt mehrere
richtige MÃ¶glichkeiten.

ifdef::show_solutions[]
====
.LÃ¶sung
. Haltestellen der Ã–V-Verbindungen +
Zeitplan und Ort der Haltestellen
auf Homepage der Ã–V-Anbieter
nachschauen und im GIS
implementieren. +
. UngefÃ¤hrliche Wanderwege
durch Naturlandschaft +
Frei zugÃ¤ngliche Luftaufnahmen
(Bsp. Bing Maps) analysieren
und bestmÃ¶gliche Route bestimmen
und einzeichnen.

====
endif::show_solutions[]
